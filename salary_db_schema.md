# 📦 עיצוב בסיס נתונים לאפליקציית ניהול שכר

מערכת שכר אישית המאפשרת למשתמשים להזין משמרות, לחשב שכר לפי מדרגות שעות נוספות לפי החוק בישראל, ולהפיק תלוש שכר ברוטו ונטו.

---

## 🧱 מבנה בסיס הנתונים (DB Schema)

### 1. טבלת `users` – משתמשים

| עמודה | טיפוס | הערות |
|-------|--------|--------|
| `id` | `Integer` | מפתח ראשי |
| `username` | `String` | ייחודי, לא null |
| `email` | `String` | ייחודי, לא null |
| `password_hash` | `Text` | סיסמה מוצפנת |
| `hourly_wage` | `Float` | שכר שעתי בסיסי |
| `tax_credit_points` | `Float` | ברירת מחדל: 2.25 |
| `deductions` | `JSON` | ניכויים אישיים (מס, ביטוח לאומי, פנסיה...) |

---

### 2. טבלת `shifts` – משמרות

| עמודה | טיפוס | הערות |
|--------|--------|--------|
| `id` | `Integer` | מפתח ראשי |
| `user_id` | `Integer` | מפתח זר ל־`users` |
| `date` | `Date` | תאריך המשמרת |
| `start_time` | `Time` | שעת התחלה |
| `end_time` | `Time` | שעת סיום |
| `note` | `Text` | הערה אופציונלית |

> החישוב של שעות רגילות/נוספות יבוצע בזמן ריצה – לא נשמר במסד.

---

### 3. טבלת `monthly_summaries` (אופציונלי) – סיכום חודשי

| עמודה | טיפוס | הערות |
|--------|--------|--------|
| `id` | `Integer` | מפתח ראשי |
| `user_id` | `Integer` | מפתח זר ל־`users` |
| `month` | `String` | למשל: `"2025-07"` |
| `total_hours_100` | `Float` | שעות ב־100% |
| `total_hours_125` | `Float` | שעות ב־125% |
| `total_hours_150` | `Float` | ... |
| `gross_salary` | `Float` | ברוטו |
| `net_salary` | `Float` | נטו |
| `tax_deductions` | `JSON` | תיאור הניכויים שהיו באותו חודש |

---

## 🔗 קשרים בין הטבלאות

```
users ─────────┐
     ▲         │
     │         │
   user_id     │
     │         ▼
  shifts   monthly_summaries
```

---

## 🔁 פעולות נפוצות

| פעולה | טבלאות מעורבות |
|-------|-----------------|
| הרשמה | `users` |
| הזנת משמרת | `shifts` |
| צפייה בפירוט יומי | `shifts` + חישוב |
| צפייה בתלוש חודשי | `shifts` (חישוב לפי חודש) |
| עריכת ניכויים | `users.deductions` |
| חישוב נטו | `users` + נוסחאות מס |

---

## ℹ️ האם לשמור את שעות נוספות במסד?

- ❌ לא חובה – מחשבים אותן לפי שעת התחלה/סיום בכל משמרת.
- ✅ כן כדאי לשמור סיכום חודשי בטבלה `monthly_summaries` אם רוצים היסטוריית תלושים.

